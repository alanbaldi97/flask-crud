(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[3],{3717:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-page",[a("div",{staticClass:"row"},[a("div",{staticClass:"q-pa-md q-gutter-sm"},[a("q-breadcrumbs",{attrs:{gutter:"none"}},[a("q-breadcrumbs-el",{attrs:{label:"Inicio"}}),a("q-breadcrumbs-el",{attrs:{label:"Administradores"}})],1)],1)]),a("div",{staticClass:"row q-pa-md"},[a("div",{staticClass:"col-12 col-md-12 row justify-end"},[a("q-btn",{attrs:{color:"indigo-5",icon:"add",rounded:""},on:{click:e.addManager}})],1),a("div",{staticClass:"col-12 col-md-12 q-mt-md"},[a("q-table",{attrs:{title:"Administradores",data:e.managers,columns:e.columns},scopedSlots:e._u([{key:"top",fn:function(){return[a("q-input",{attrs:{outlined:"","bottom-slots":"",dense:"",debounce:"300",color:"primary",placeholder:"Buscar"},on:{keypress:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search.apply(null,arguments)}},scopedSlots:e._u([{key:"before",fn:function(){return[a("q-btn",{staticClass:"q-ml-sm bg-indigo text-white q-mr-sm",attrs:{size:"md",dense:"",icon:"filter_alt"},on:{click:function(t){e.show=!0}}},[a("q-menu",[a("q-list",{staticClass:"q-pa-sm",staticStyle:{"min-width":"300px"}},[a("q-item",[a("q-item-section",[e._v("Filtros de búsqueda")]),a("q-space"),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"q-ml-sm text-black bg-white",attrs:{flat:"",size:"sm",icon:"clear",dense:""}})],1),a("q-separator"),a("q-item",[a("q-item-section",[a("q-select",{attrs:{"option-value":"id","option-label":"name",dense:"",outlined:"",options:e.areaTypes,label:"Tipo de Area","emit-value":"","map-options":""},model:{value:e.filter.area_type_id,callback:function(t){e.$set(e.filter,"area_type_id",t)},expression:"filter.area_type_id"}})],1)],1),a("q-item",[a("q-item-section",[a("q-select",{attrs:{dense:"",outlined:"",options:["Activo","Inactivo"],label:"Estado"},model:{value:e.filter.status,callback:function(t){e.$set(e.filter,"status",t)},expression:"filter.status"}})],1)],1),a("q-separator"),a("q-item",[a("q-item-section",[a("div",{staticClass:"row justify-center"},[a("q-btn",{staticClass:"q-mr-sm",attrs:{size:"md",dense:"",outline:"",label:"Limpiar"},on:{click:e.cleanFilter}}),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{size:"md",color:"indigo-6",outline:"",label:"Aplicar filtros",dense:""}})],1)])],1)],1)],1)],1)]},proxy:!0},{key:"prepend",fn:function(){return[a("q-icon",{attrs:{name:"search"}})]},proxy:!0},{key:"after",fn:function(){return[a("q-btn",{staticClass:"q-ml-sm bg-indigo text-white",attrs:{size:"md",icon:"search",dense:""},on:{click:e.search}})]},proxy:!0}]),model:{value:e.filter.search,callback:function(t){e.$set(e.filter,"search",t)},expression:"filter.search"}})]},proxy:!0},{key:"body-cell-avatar",fn:function(t){return[a("q-td",{attrs:{props:t}},[a("q-avatar",{attrs:{size:"50px"}},[a("img",{attrs:{src:e.getImage(t.row)}})])],1)]}},{key:"body-cell-status",fn:function(t){return[a("q-td",{attrs:{props:t}},[a("q-chip",{attrs:{color:"Activo"==t.row.status?"green-13":"red-13"}},[a("span",{staticClass:"text-bold"},[e._v(e._s(t.row.status))])])],1)]}},{key:"body-cell-actions",fn:function(t){return[a("q-td",{attrs:{props:t}},[a("q-btn",{attrs:{color:"indigo-3",size:"md",icon:"edit",round:"",flat:""},on:{click:function(a){return e.onEdit(t.row)}}},[a("q-tooltip",{attrs:{"content-class":"bg-indigo",offset:[10,10]}},[e._v("\n                                Editar\n                            ")])],1),a("q-btn",{attrs:{color:"red",size:"md",icon:"delete",round:"",flat:""},on:{click:function(a){return e.onDelete(t.row)}}},[a("q-tooltip",{attrs:{"content-class":"bg-indigo",offset:[10,10]}},[e._v("\n                                Eliminar\n                            ")])],1),a("q-btn",{attrs:{color:"indigo-3",size:"md",icon:"visibility",round:"",flat:""},on:{click:function(a){return e.onVisibility(t.row)}}},[a("q-tooltip",{attrs:{"content-class":"bg-indigo",offset:[10,10]}},[e._v("\n                                Visualizar\n                            ")])],1)],1)]}}])})],1)])])},i=[],r=[{name:"id",required:!0,label:"ID",align:"center",field:e=>e.id,sortable:!0},{name:"avatar",required:!0,label:"Nombre",align:"center"},{name:"name",required:!0,label:"Nombre",align:"center",field:e=>e.name,sortable:!0},{name:"last_name",required:!0,label:"Apellidos",align:"center",field:e=>e.last_name,sortable:!0},{name:"area",required:!0,label:"Tipo de Area",align:"center",field:e=>e.area_type.name,sortable:!0},{name:"status",required:!0,label:"Estado",align:"center",field:e=>e.status,sortable:!0},{name:"actions",required:!0,label:"",align:"center",field:e=>e.city,sortable:!0}],n=a("bc3e"),o=a("e78e"),l=a("2f62");const c=new o["a"],d=new n["a"];var u={created(){this.loadManagers(),this.loadAreaTypes()},data(){return{managers:[],columns:r,show:!1,areaTypes:[],filter:{search:null,area_type_id:null,status:null}}},methods:{...Object(l["b"])("manager",["setIsEdit","setIsVisibilty"]),async loadAreaTypes(){const{data:e}=await c.getAll();this.areaTypes=e},getImage(e){return e.img?`https://test-flask-crud.herokuapp.com/api/managers/get-image?filename=${e.img}`:""},async loadManagers(){const e=await d.getAll(this.filter);this.managers=e},onEdit(e){this.setIsVisibilty(!1),this.setIsEdit(!0),this.$router.push({name:"add-edit-manager",params:{id:e.id}})},addManager(){this.setIsEdit(!1),this.setIsVisibilty(!1),this.$router.push({name:"add-edit-manager"})},async onDelete(e){const t=await this.$confirm("¿Desea eliminar el registro?","Este proceso es irreversible");if(t)try{this.$q.loading.show();const t=await d.deleteManager(e.id);if(!t.success)return this.$notify(t.msg,"error");this.$notify(t.msg),this.loadManagers()}catch(a){console.log(a),this.$serverError(a)}finally{this.$q.loading.hide()}},onVisibility(e){this.setIsVisibilty(!0),this.setIsEdit(!0),this.$router.push({name:"add-edit-manager",params:{id:e.id}})},cleanFilter(){this.filter.area_type_id=null,this.filter.search=null,this.filter.status=null},search(){this.loadManagers()}}},m=u,p=a("2877"),b=a("9989"),f=a("ead5"),g=a("079e"),h=a("9c40"),q=a("eaac"),y=a("27f9"),v=a("4e73"),w=a("1c1c"),k=a("66e5"),_=a("4074"),I=a("2c91"),Q=a("eb85"),x=a("ddd8"),$=a("0016"),A=a("db86"),C=a("cb32"),E=a("b047"),z=a("05c0"),T=a("7f67"),M=a("eebe"),S=a.n(M),V=Object(p["a"])(m,s,i,!1,null,null,null);t["default"]=V.exports;S()(V,"components",{QPage:b["a"],QBreadcrumbs:f["a"],QBreadcrumbsEl:g["a"],QBtn:h["a"],QTable:q["a"],QInput:y["a"],QMenu:v["a"],QList:w["a"],QItem:k["a"],QItemSection:_["a"],QSpace:I["a"],QSeparator:Q["a"],QSelect:x["a"],QIcon:$["a"],QTd:A["a"],QAvatar:C["a"],QChip:E["a"],QTooltip:z["a"]}),S()(V,"directives",{ClosePopup:T["a"]})},bc3e:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var s=a("5607");class i extends s["a"]{constructor(){super()}async getAll(e={}){const{data:t}=await this.post("managers",e);return t}async getById(e){const{data:t}=await this.get(`managers/${e}/get-by-id`);return t}async insert(e){const{data:t}=await this.post("managers/store",e);return t}async update(e,t){const{data:a}=await this.post(`managers/${e}`,t);return a}async deleteManager(e){const{data:t}=await this.delete(`managers/${e}`);return t}}},e78e:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var s=a("5607");class i extends s["a"]{constructor(){super()}getAll(){return this.get("area-types")}}}}]);